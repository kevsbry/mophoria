{"ast":null,"code":"import _regeneratorRuntime from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import axios from\"axios\";import style from\"../../movie_tv_components/movie_tv.module.css\";import Overview from\"../../movie_tv_components/Overview\";import Title from\"../../globalComponents/Title\";import Seasons from\"../../movie_tv_components/Seasons\";import Videos from\"../../movie_tv_components/Videos\";import Picture from\"../../movie_tv_components/Picture\";import Cast from\"../../movie_tv_components/Cast\";import List from\"../../globalComponents/List\";import Copyright from\"../../globalComponents/Copyright\";import PictureModal from\"../../globalComponents/PictureModal\";import CastModal from\"../../globalComponents/CastModal\";import CloseIcon from\"@material-ui/icons/Close\";var SeasonModal=React.forwardRef(function(props,ref){var closeModal=function closeModal(){ref.background.current.style.visibility=\"hidden\";ref.background.current.style.opacity=\"0\";ref.background.current.style.transition=\"all 200ms ease-in\";ref.modal.current.style.visibility=\"hidden\";ref.modal.current.style.opacity=\"0\";ref.modal.current.style.transition=\"all 200ms ease-in\";};return React.createElement(React.Fragment,null,React.createElement(\"div\",{ref:ref.background,className:style[\"season-modal-background\"],onClick:closeModal}),React.createElement(\"div\",{ref:ref.modal,className:style[\"season-modal\"]},React.createElement(CloseIcon,{className:style.closeIcon,onClick:closeModal}),React.createElement(Title,{titleName:props.seasonName}),props.episodes&&props.episodes.map(function(ep){return React.createElement(\"div\",{className:style.episode},React.createElement(\"img\",{src:\"https://image.tmdb.org/t/p/w300/\".concat(ep.still_path),alt:\"still image\"}),React.createElement(\"div\",{style:{display:\"flex\",flexDirection:\"column\",marginLeft:\"1em\"}},React.createElement(\"span\",{className:style[\"episode-name\"]},ep.name),React.createElement(\"span\",{className:style[\"episode-num\"]},\"Episode \",ep.episode_number),React.createElement(\"span\",{className:style[\"episode-overview\"]},ep.overview)));})));});var Tv=/*#__PURE__*/function(_React$Component){_inherits(Tv,_React$Component);function Tv(){var _getPrototypeOf2;var _this;_classCallCheck(this,Tv);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Tv)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.tvID=function(){var tvID=_this.props.match.params.tvID;return tvID;};_this.state={apiKey:\"325d84ad33eb95a5c0fc5427ba3f569a\",tvID:_this.tvID(),details:{},seasonEpisodes:[],selectedSeasonName:\"\",posters:[],backdrops:[],cast:[],crew:[]};_this.setImages=function(posters,backdrops){_this.setState(function(){return{posters:_toConsumableArray(posters),backdrops:_toConsumableArray(backdrops)};});};_this.setCast=function(cast,crew){_this.setState(function(){return{cast:_toConsumableArray(cast),crew:_toConsumableArray(crew)};});};_this.setModalVisible=function(ref){ref.background.current.style.visibility=\"visible\";ref.background.current.style.opacity=\"1\";ref.background.current.style.transition=\"all 200ms ease-in\";ref.modal.current.style.visibility=\"visible\";ref.modal.current.style.opacity=\"1\";ref.modal.current.style.transition=\"all 200ms ease-in\";};_this.openPictureModal=function(){_this.setModalVisible({background:_this.pictureModalBackground,modal:_this.pictureModal});};_this.openCastModal=function(){_this.setModalVisible({background:_this.castModalBackground,modal:_this.castModal});};_this.openSeasonModal=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(seasonNum,seasonName){var _this$state,apiKey,tvID;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setModalVisible({background:_this.seasonModalBackground,modal:_this.seasonModal});_this$state=_this.state,apiKey=_this$state.apiKey,tvID=_this$state.tvID;_context.next=4;return axios.get(\"https://api.themoviedb.org/3/tv/\".concat(tvID,\"/season/\").concat(seasonNum,\"?api_key=\").concat(apiKey,\"&language=en-US\")).then(function(res){_this.setState(function(){return{seasonEpisodes:res.data.episodes,selectedSeasonName:seasonName};});}).catch(function(err){return console.log(err);});case 4:_this.seasonModal.current.scrollTop=0;case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();return _this;}_createClass(Tv,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this2=this;var _this$state2,apiKey,tvID;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state2=this.state,apiKey=_this$state2.apiKey,tvID=_this$state2.tvID;this.pictureModalBackground=React.createRef();this.pictureModal=React.createRef();this.castModalBackground=React.createRef();this.castModal=React.createRef();this.seasonModalBackground=React.createRef();this.seasonModal=React.createRef();_context2.next=9;return axios.get(\"https://api.themoviedb.org/3/tv/\".concat(tvID,\"?api_key=\").concat(apiKey,\"&language=en-US\")).then(function(res){_this2.setState(function(){return{details:res.data};});}).catch(function(err){return console.log(err);});case 9:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:style[\"page-grid\"]},React.createElement(PictureModal,{ref:{firstRef:this.pictureModalBackground,secondRef:this.pictureModal},posters:this.state.posters,backdrops:this.state.backdrops}),React.createElement(CastModal,{ref:{background:this.castModalBackground,modal:this.castModal},cast:this.state.cast,crew:this.state.crew}),React.createElement(SeasonModal,{ref:{background:this.seasonModalBackground,modal:this.seasonModal},episodes:this.state.seasonEpisodes,seasonName:this.state.selectedSeasonName}),React.createElement(Overview,{details:this.state.details}),React.createElement(Title,{titleName:\"Seasons\"}),React.createElement(Seasons,{seriesName:this.state.details.name,seasons:this.state.details.seasons,open:this.openSeasonModal}),React.createElement(Title,{titleName:\"Videos\"}),React.createElement(Videos,{isMovie:false,apiKey:this.state.apiKey,itemID:this.state.tvID}),React.createElement(Title,{titleName:\"Pictures\",more:true,onClickViewAll:this.openPictureModal}),React.createElement(Picture,{isMovie:false,itemID:this.state.tvID,apiKey:this.state.apiKey,setImages:this.setImages}),React.createElement(Title,{titleName:\"Cast\",more:true,onClickViewAll:this.openCastModal}),React.createElement(Cast,{isPerson:false,isMovie:false,apiKey:this.state.apiKey,itemID:this.state.tvID,setCast:this.setCast}),React.createElement(Title,{titleName:\"Similar tv shows\"}),React.createElement(List,{api:\"https://api.themoviedb.org/3/tv/\".concat(this.state.tvID,\"/similar?api_key=\").concat(this.state.apiKey,\"&language=en-US&page=1\"),isMovie:false}),React.createElement(Copyright,null));}}]);return Tv;}(React.Component);export default Tv;","map":{"version":3,"sources":["/media/kevin/Projects/REACT/mophoria/src/components/pages/tv/Tv.js"],"names":["React","axios","style","Overview","Title","Seasons","Videos","Picture","Cast","List","Copyright","PictureModal","CastModal","CloseIcon","SeasonModal","forwardRef","props","ref","closeModal","background","current","visibility","opacity","transition","modal","closeIcon","seasonName","episodes","map","ep","episode","still_path","display","flexDirection","marginLeft","name","episode_number","overview","Tv","tvID","match","params","state","apiKey","details","seasonEpisodes","selectedSeasonName","posters","backdrops","cast","crew","setImages","setState","setCast","setModalVisible","openPictureModal","pictureModalBackground","pictureModal","openCastModal","castModalBackground","castModal","openSeasonModal","seasonNum","seasonModalBackground","seasonModal","get","then","res","data","catch","err","console","log","scrollTop","createRef","firstRef","secondRef","seasons","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport style from \"../../movie_tv_components/movie_tv.module.css\";\r\nimport Overview from \"../../movie_tv_components/Overview\";\r\nimport Title from \"../../globalComponents/Title\";\r\nimport Seasons from \"../../movie_tv_components/Seasons\";\r\nimport Videos from \"../../movie_tv_components/Videos\";\r\nimport Picture from \"../../movie_tv_components/Picture\";\r\nimport Cast from \"../../movie_tv_components/Cast\";\r\nimport List from \"../../globalComponents/List\";\r\nimport Copyright from \"../../globalComponents/Copyright\";\r\nimport PictureModal from \"../../globalComponents/PictureModal\";\r\nimport CastModal from \"../../globalComponents/CastModal\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n\r\nconst SeasonModal = React.forwardRef((props, ref) => {\r\n  const closeModal = () => {\r\n    ref.background.current.style.visibility = \"hidden\";\r\n    ref.background.current.style.opacity = \"0\";\r\n    ref.background.current.style.transition = \"all 200ms ease-in\";\r\n\r\n    ref.modal.current.style.visibility = \"hidden\";\r\n    ref.modal.current.style.opacity = \"0\";\r\n    ref.modal.current.style.transition = \"all 200ms ease-in\";\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        ref={ref.background}\r\n        className={style[\"season-modal-background\"]}\r\n        onClick={closeModal}\r\n      ></div>\r\n      <div ref={ref.modal} className={style[\"season-modal\"]}>\r\n        <CloseIcon className={style.closeIcon} onClick={closeModal} />\r\n        <Title titleName={props.seasonName} />\r\n        {props.episodes &&\r\n          props.episodes.map(ep => (\r\n            <div className={style.episode}>\r\n              <img\r\n                src={`https://image.tmdb.org/t/p/w300/${ep.still_path}`}\r\n                alt=\"still image\"\r\n              />\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  flexDirection: \"column\",\r\n                  marginLeft: \"1em\"\r\n                }}\r\n              >\r\n                <span className={style[\"episode-name\"]}>{ep.name}</span>\r\n                <span className={style[\"episode-num\"]}>\r\n                  Episode {ep.episode_number}\r\n                </span>\r\n                <span className={style[\"episode-overview\"]}>{ep.overview}</span>\r\n              </div>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nclass Tv extends React.Component {\r\n  tvID = () => {\r\n    const { tvID } = this.props.match.params;\r\n    return tvID;\r\n  };\r\n\r\n  state = {\r\n    apiKey: \"325d84ad33eb95a5c0fc5427ba3f569a\",\r\n    tvID: this.tvID(),\r\n    details: {},\r\n    seasonEpisodes: [],\r\n    selectedSeasonName: \"\",\r\n    posters: [],\r\n    backdrops: [],\r\n    cast: [],\r\n    crew: []\r\n  };\r\n\r\n  setImages = (posters, backdrops) => {\r\n    this.setState(() => {\r\n      return {\r\n        posters: [...posters],\r\n        backdrops: [...backdrops]\r\n      };\r\n    });\r\n  };\r\n\r\n  setCast = (cast, crew) => {\r\n    this.setState(() => {\r\n      return {\r\n        cast: [...cast],\r\n        crew: [...crew]\r\n      };\r\n    });\r\n  };\r\n\r\n  setModalVisible = ref => {\r\n    ref.background.current.style.visibility = \"visible\";\r\n    ref.background.current.style.opacity = \"1\";\r\n    ref.background.current.style.transition = \"all 200ms ease-in\";\r\n\r\n    ref.modal.current.style.visibility = \"visible\";\r\n    ref.modal.current.style.opacity = \"1\";\r\n    ref.modal.current.style.transition = \"all 200ms ease-in\";\r\n  };\r\n\r\n  openPictureModal = () => {\r\n    this.setModalVisible({\r\n      background: this.pictureModalBackground,\r\n      modal: this.pictureModal\r\n    });\r\n  };\r\n\r\n  openCastModal = () => {\r\n    this.setModalVisible({\r\n      background: this.castModalBackground,\r\n      modal: this.castModal\r\n    });\r\n  };\r\n\r\n  openSeasonModal = async (seasonNum, seasonName) => {\r\n    this.setModalVisible({\r\n      background: this.seasonModalBackground,\r\n      modal: this.seasonModal\r\n    });\r\n    const { apiKey, tvID } = this.state;\r\n    await axios\r\n      .get(\r\n        `https://api.themoviedb.org/3/tv/${tvID}/season/${seasonNum}?api_key=${apiKey}&language=en-US`\r\n      )\r\n      .then(res => {\r\n        this.setState(() => {\r\n          return {\r\n            seasonEpisodes: res.data.episodes,\r\n            selectedSeasonName: seasonName\r\n          };\r\n        });\r\n      })\r\n      .catch(err => console.log(err));\r\n    this.seasonModal.current.scrollTop = 0;\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const { apiKey, tvID } = this.state;\r\n    this.pictureModalBackground = React.createRef();\r\n    this.pictureModal = React.createRef();\r\n    this.castModalBackground = React.createRef();\r\n    this.castModal = React.createRef();\r\n    this.seasonModalBackground = React.createRef();\r\n    this.seasonModal = React.createRef();\r\n\r\n    await axios\r\n      .get(\r\n        `https://api.themoviedb.org/3/tv/${tvID}?api_key=${apiKey}&language=en-US`\r\n      )\r\n      .then(res => {\r\n        this.setState(() => {\r\n          return {\r\n            details: res.data\r\n          };\r\n        });\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={style[\"page-grid\"]}>\r\n        <PictureModal\r\n          ref={{\r\n            firstRef: this.pictureModalBackground,\r\n            secondRef: this.pictureModal\r\n          }}\r\n          posters={this.state.posters}\r\n          backdrops={this.state.backdrops}\r\n        />\r\n        <CastModal\r\n          ref={{ background: this.castModalBackground, modal: this.castModal }}\r\n          cast={this.state.cast}\r\n          crew={this.state.crew}\r\n        />\r\n\r\n        <SeasonModal\r\n          ref={{\r\n            background: this.seasonModalBackground,\r\n            modal: this.seasonModal\r\n          }}\r\n          episodes={this.state.seasonEpisodes}\r\n          seasonName={this.state.selectedSeasonName}\r\n        />\r\n\r\n        <Overview details={this.state.details} />\r\n        <Title titleName=\"Seasons\" />\r\n        <Seasons\r\n          seriesName={this.state.details.name}\r\n          seasons={this.state.details.seasons}\r\n          open={this.openSeasonModal}\r\n        />\r\n        <Title titleName=\"Videos\" />\r\n        <Videos\r\n          isMovie={false}\r\n          apiKey={this.state.apiKey}\r\n          itemID={this.state.tvID}\r\n        />\r\n        <Title\r\n          titleName=\"Pictures\"\r\n          more={true}\r\n          onClickViewAll={this.openPictureModal}\r\n        />\r\n        <Picture\r\n          isMovie={false}\r\n          itemID={this.state.tvID}\r\n          apiKey={this.state.apiKey}\r\n          setImages={this.setImages}\r\n        />\r\n        <Title\r\n          titleName=\"Cast\"\r\n          more={true}\r\n          onClickViewAll={this.openCastModal}\r\n        />\r\n        <Cast\r\n          isPerson={false}\r\n          isMovie={false}\r\n          apiKey={this.state.apiKey}\r\n          itemID={this.state.tvID}\r\n          setCast={this.setCast}\r\n        />\r\n        <Title titleName=\"Similar tv shows\" />\r\n        <List\r\n          api={`https://api.themoviedb.org/3/tv/${this.state.tvID}/similar?api_key=${this.state.apiKey}&language=en-US&page=1`}\r\n          isMovie={false}\r\n        />\r\n        <Copyright />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Tv;\r\n"]},"metadata":{},"sourceType":"module"}