{"ast":null,"code":"import _regeneratorRuntime from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import axios from\"axios\";import PlayArrowIcon from\"@material-ui/icons/PlayArrow\";import NavigateBeforeIcon from\"@material-ui/icons/NavigateBefore\";import NavigateNextIcon from\"@material-ui/icons/NavigateNext\";import CloseIcon from\"@material-ui/icons/Close\";import\"./style.css\";var Carousel=function Carousel(props){return React.createElement(\"div\",{className:\"carousel-slide\"},props.content.map(function(c){return React.createElement(React.Fragment,{key:c.id},React.createElement(\"img\",{className:\"poster\",src:\"https://image.tmdb.org/t/p/w500\".concat(c.poster_path),alt:\"\"}),React.createElement(\"img\",{className:\"backdrop\",src:\"https://image.tmdb.org/t/p/w1280\".concat(c.backdrop_path),alt:\"movie backdrop\"}));}));};//overlay\nvar PosterOverlay=function PosterOverlay(props){return React.createElement(\"div\",{className:\"poster-overlay\"},props.movie.map(function(m,i){return React.createElement(React.Fragment,{key:m.id},i===props.currentIndex&&React.createElement(\"span\",null,\"\".concat(m.vote_average,\" / 10\")));}));};var BackdropOverlay=function BackdropOverlay(props){return React.createElement(\"div\",{className:\"backdrop-overlay\"},React.createElement(PlayArrowIcon,{className:\"playBtn\",onClick:props.onPlay,fontSize:\"large\"}),props.movie.map(function(m,i){return i===props.currentIndex&&React.createElement(\"span\",{key:m.id},\"\".concat(m.title,\" | \").concat(props.videoType));}));};//prev and next btn\nvar PrevBtn=function PrevBtn(props){return React.createElement(\"div\",{className:\"prev-btn\",onClick:props.onPrevClick},React.createElement(NavigateBeforeIcon,{className:\"featured-prev\"}));};var NextBtn=function NextBtn(props){return React.createElement(\"div\",{className:\"next-btn\",onClick:props.onNextClick},React.createElement(NavigateNextIcon,{className:\"featured-next\"}));};//modal\nvar ModalVideo=function ModalVideo(props){return React.createElement(\"div\",{className:\"modal\"},React.createElement(\"div\",{className:\"close\"},React.createElement(CloseIcon,{className:\"closeModal\",fontSize:\"large\",onClick:props.onClose}),React.createElement(\"span\",null,\"Close\")),React.createElement(\"iframe\",{src:\"https://www.youtube.com/embed/\"+\"\".concat(props.videoKey),title:\"trailer\",frameBorder:\"0\"}));};var Featured=/*#__PURE__*/function(_React$Component){_inherits(Featured,_React$Component);function Featured(){var _getPrototypeOf2;var _this;_classCallCheck(this,Featured);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Featured)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.onPlay=function(){var modal=document.querySelector(\".modal\");modal.classList.toggle(\"modal-active\");};_this.slideTransformValue=0;_this.onPrevClick=function(){var carouselSlide=document.querySelector(\".carousel-slide\");if(_this.slideTransformValue>0){_this.setState(function(){return{currentMovieIndex:_this.state.currentMovieIndex-1};});_this.slideTransformValue-=100;carouselSlide.style.transform=\"translateX(-\".concat(_this.slideTransformValue,\"%)\");}};_this.onNextClick=function(){var carouselSlide=document.querySelector(\".carousel-slide\");if(_this.slideTransformValue<1900){_this.setState(function(){return{currentMovieIndex:_this.state.currentMovieIndex+1};});_this.slideTransformValue+=100;carouselSlide.style.transform=\"translateX(-\".concat(_this.slideTransformValue,\"%)\");}};_this.onModalClose=function(){var modal=document.querySelector(\".modal\");modal.classList.remove(\"modal-active\");};_this.onWindowClick=function(){return window.addEventListener(\"click\",function(e){if(e.target.tagName===\"HTML\"){var modal=document.querySelector(\".modal\");modal.classList.remove(\"modal-active\");}});};_this.state={currentMovieIndex:0,currentVideoKey:\"\",currentVideoType:\"\",trending:[]};return _this;}_createClass(Featured,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this2=this;//check if user go next or back then get movievideos and set new videoKey, videoType\nif(prevState.currentMovieIndex!==this.state.currentMovieIndex){axios.get(\"https://api.themoviedb.org/3/movie/\".concat(this.state.trending[this.state.currentMovieIndex].id,\"/videos?api_key=\").concat(this.props.apiKey,\"&language=en-US\")).then(function(res){_this2.setState({currentVideoKey:res.data.results[0].key,currentVideoType:res.data.results[0].type});}).catch(function(err){return console.log(err);});}}},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this3=this;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://api.themoviedb.org/3/trending/movie/day?api_key=\".concat(this.props.apiKey)).then(function(res){_this3.setState(function(){return{trending:_toConsumableArray(res.data.results)};});}).catch(function(err){console.log(err);});case 2:_context.next=4;return axios.get(\"https://api.themoviedb.org/3/movie/\".concat(this.state.trending[this.state.currentMovieIndex].id,\"/videos?api_key=\").concat(this.props.apiKey,\"&language=en-US\")).then(function(res){_this3.setState({currentVideoKey:res.data.results[0].key,currentVideoType:res.data.results[0].type});}).catch(function(err){return console.log(err);});case 4:this.setState({});//close modal\nthis.onWindowClick();case 6:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"featured\"},React.createElement(Carousel,{content:this.state.trending,current:this.state.currentMovieIndex}),React.createElement(PrevBtn,{onPrevClick:this.onPrevClick}),React.createElement(NextBtn,{onNextClick:this.onNextClick}),React.createElement(BackdropOverlay,{movie:this.state.trending,currentIndex:this.state.currentMovieIndex,videoType:this.state.currentVideoType,onPlay:this.onPlay}),React.createElement(PosterOverlay,{movie:this.state.trending,currentIndex:this.state.currentMovieIndex}),React.createElement(ModalVideo,{videoKey:this.state.currentVideoKey,onClose:this.onModalClose}));}}]);return Featured;}(React.Component);export default Featured;","map":{"version":3,"sources":["/media/kevin/Projects/REACT/mophoria/src/components/pages/home/Featured.js"],"names":["React","axios","PlayArrowIcon","NavigateBeforeIcon","NavigateNextIcon","CloseIcon","Carousel","props","content","map","c","id","poster_path","backdrop_path","PosterOverlay","movie","m","i","currentIndex","vote_average","BackdropOverlay","onPlay","title","videoType","PrevBtn","onPrevClick","NextBtn","onNextClick","ModalVideo","onClose","videoKey","Featured","modal","document","querySelector","classList","toggle","slideTransformValue","carouselSlide","setState","currentMovieIndex","state","style","transform","onModalClose","remove","onWindowClick","window","addEventListener","e","target","tagName","currentVideoKey","currentVideoType","trending","prevProps","prevState","get","apiKey","then","res","data","results","key","type","catch","err","console","log","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport PropsTypes from \"prop-types\";\r\nimport PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\r\nimport NavigateBeforeIcon from \"@material-ui/icons/NavigateBefore\";\r\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport \"./style.css\";\r\n\r\nconst Carousel = props => {\r\n  return (\r\n    <div className=\"carousel-slide\">\r\n      {props.content.map(c => (\r\n        <React.Fragment key={c.id}>\r\n          <img\r\n            className=\"poster\"\r\n            src={`https://image.tmdb.org/t/p/w500${c.poster_path}`}\r\n            alt=\"\"\r\n          />\r\n\r\n          <img\r\n            className=\"backdrop\"\r\n            src={`https://image.tmdb.org/t/p/w1280${c.backdrop_path}`}\r\n            alt=\"movie backdrop\"\r\n          />\r\n        </React.Fragment>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n//overlay\r\nconst PosterOverlay = props => {\r\n  return (\r\n    <div className=\"poster-overlay\">\r\n      {props.movie.map((m, i) => (\r\n        <React.Fragment key={m.id}>\r\n          {i === props.currentIndex && <span>{`${m.vote_average} / 10`}</span>}\r\n        </React.Fragment>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst BackdropOverlay = props => {\r\n  return (\r\n    <div className=\"backdrop-overlay\">\r\n      <PlayArrowIcon\r\n        className=\"playBtn\"\r\n        onClick={props.onPlay}\r\n        fontSize=\"large\"\r\n      />\r\n      {props.movie.map(\r\n        (m, i) =>\r\n          i === props.currentIndex && (\r\n            <span key={m.id}>{`${m.title} | ${props.videoType}`}</span>\r\n          )\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n//prev and next btn\r\nconst PrevBtn = props => {\r\n  return (\r\n    <div className=\"prev-btn\" onClick={props.onPrevClick}>\r\n      <NavigateBeforeIcon className=\"featured-prev\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst NextBtn = props => {\r\n  return (\r\n    <div className=\"next-btn\" onClick={props.onNextClick}>\r\n      <NavigateNextIcon className=\"featured-next\" />\r\n    </div>\r\n  );\r\n};\r\n\r\n//modal\r\nconst ModalVideo = props => {\r\n  return (\r\n    <div className=\"modal\">\r\n      <div className=\"close\">\r\n        <CloseIcon\r\n          className=\"closeModal\"\r\n          fontSize=\"large\"\r\n          onClick={props.onClose}\r\n        />\r\n        <span>Close</span>\r\n      </div>\r\n      <iframe\r\n        src={\"https://www.youtube.com/embed/\" + `${props.videoKey}`}\r\n        title=\"trailer\"\r\n        frameBorder=\"0\"\r\n      ></iframe>\r\n    </div>\r\n  );\r\n};\r\n\r\nclass Featured extends React.Component {\r\n  onPlay = () => {\r\n    const modal = document.querySelector(\".modal\");\r\n    modal.classList.toggle(\"modal-active\");\r\n  };\r\n\r\n  slideTransformValue = 0;\r\n  onPrevClick = () => {\r\n    const carouselSlide = document.querySelector(\".carousel-slide\");\r\n    if (this.slideTransformValue > 0) {\r\n      this.setState(() => {\r\n        return { currentMovieIndex: this.state.currentMovieIndex - 1 };\r\n      });\r\n      this.slideTransformValue -= 100;\r\n      carouselSlide.style.transform = `translateX(-${this.slideTransformValue}%)`;\r\n    }\r\n  };\r\n\r\n  onNextClick = () => {\r\n    const carouselSlide = document.querySelector(\".carousel-slide\");\r\n\r\n    if (this.slideTransformValue < 1900) {\r\n      this.setState(() => {\r\n        return { currentMovieIndex: this.state.currentMovieIndex + 1 };\r\n      });\r\n      this.slideTransformValue += 100;\r\n      carouselSlide.style.transform = `translateX(-${this.slideTransformValue}%)`;\r\n    }\r\n  };\r\n\r\n  onModalClose = () => {\r\n    const modal = document.querySelector(\".modal\");\r\n    modal.classList.remove(\"modal-active\");\r\n  };\r\n\r\n  onWindowClick = () =>\r\n    window.addEventListener(\"click\", e => {\r\n      if (e.target.tagName === \"HTML\") {\r\n        const modal = document.querySelector(\".modal\");\r\n        modal.classList.remove(\"modal-active\");\r\n      }\r\n    });\r\n\r\n  // STATE\r\n  state = {\r\n    currentMovieIndex: 0,\r\n    currentVideoKey: \"\",\r\n    currentVideoType: \"\",\r\n    trending: []\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    //check if user go next or back then get movievideos and set new videoKey, videoType\r\n    if (prevState.currentMovieIndex !== this.state.currentMovieIndex) {\r\n      axios\r\n        .get(\r\n          `https://api.themoviedb.org/3/movie/${\r\n            this.state.trending[this.state.currentMovieIndex].id\r\n          }/videos?api_key=${this.props.apiKey}&language=en-US`\r\n        )\r\n        .then(res => {\r\n          this.setState({\r\n            currentVideoKey: res.data.results[0].key,\r\n            currentVideoType: res.data.results[0].type\r\n          });\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    //get trending movies\r\n    await axios\r\n      .get(\r\n        `https://api.themoviedb.org/3/trending/movie/day?api_key=${this.props.apiKey}`\r\n      )\r\n      .then(res => {\r\n        this.setState(() => {\r\n          return {\r\n            trending: [...res.data.results]\r\n          };\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n\r\n    //get movie trailers\r\n    await axios\r\n      .get(\r\n        `https://api.themoviedb.org/3/movie/${\r\n          this.state.trending[this.state.currentMovieIndex].id\r\n        }/videos?api_key=${this.props.apiKey}&language=en-US`\r\n      )\r\n      .then(res => {\r\n        this.setState({\r\n          currentVideoKey: res.data.results[0].key,\r\n          currentVideoType: res.data.results[0].type\r\n        });\r\n      })\r\n      .catch(err => console.log(err));\r\n\r\n    this.setState({});\r\n\r\n    //close modal\r\n    this.onWindowClick();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"featured\">\r\n        <Carousel\r\n          content={this.state.trending}\r\n          current={this.state.currentMovieIndex}\r\n        />\r\n        <PrevBtn onPrevClick={this.onPrevClick} />\r\n        <NextBtn onNextClick={this.onNextClick} />\r\n        <BackdropOverlay\r\n          movie={this.state.trending}\r\n          currentIndex={this.state.currentMovieIndex}\r\n          videoType={this.state.currentVideoType}\r\n          onPlay={this.onPlay}\r\n        />\r\n        <PosterOverlay\r\n          movie={this.state.trending}\r\n          currentIndex={this.state.currentMovieIndex}\r\n        />\r\n        <ModalVideo\r\n          videoKey={this.state.currentVideoKey}\r\n          onClose={this.onModalClose}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nFeatured.propTypes = {\r\n  apiKey: PropsTypes.string.isRequired\r\n};\r\n\r\nexport default Featured;\r\n"]},"metadata":{},"sourceType":"module"}