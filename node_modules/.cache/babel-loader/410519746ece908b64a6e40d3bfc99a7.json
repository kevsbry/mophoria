{"ast":null,"code":"var _jsxFileName = \"P:\\\\REACT\\\\mophoria\\\\src\\\\components\\\\pages\\\\movies_tvs\\\\Movies_Tvs.js\";\nimport React from \"react\";\nimport style from \"./movies_tvs.module.css\";\nimport axios from \"axios\";\nimport Title from \"../../globalComponents/Title\";\nimport Item from \"./Item\";\nimport Filter from \"./Filter\";\nimport Copyright from \"../../globalComponents/Copyright\";\n\nclass Movies_Tvs extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      apiKey: \"325d84ad33eb95a5c0fc5427ba3f569a\",\n      items: [],\n      itemsCopy: [],\n      initialItemsValue: [],\n      currentTitle: \"Popular\",\n      selectedGenreID: \"All\",\n      selectedYear: \"All\",\n      type: this.props.type\n    };\n\n    this.getYear = date => {\n      let str = String(date);\n      return str.substring(0, 4);\n    };\n\n    this.onSearch = async e => {\n      //change items on search\n      if (e.target.value === \"\") {\n        this.setState(() => {\n          return {\n            items: [...this.state.initialItemsValue],\n            currentTitle: \"Popular\"\n          };\n        });\n      } else {\n        await axios.get(`https://api.themoviedb.org/3/search/${this.state.type}?api_key=${this.state.apiKey}&language=en-US&page=1&include_adult=false&query=${e.target.value}`).then(res => {\n          this.setState(() => {\n            return {\n              items: this.state.selectedYear === \"All\" ? res.data.results : res.data.results.filter(d => this.getYear(d.release_date) === this.state.selectedYear),\n              currentTitle: \"Search Result\"\n            };\n          });\n        }).catch(err => console.log(err)); //set itemsCopy after items is set to new values\n\n        this.setState(() => {\n          return {\n            itemsCopy: [...this.state.items]\n          };\n        }); //filter search result based on selected genre\n\n        this.onChangeGenre(this.state.selectedGenreID);\n      }\n    };\n\n    this.onChangeGenre = genre => {\n      if (genre !== this.state.selectedGenreID) {\n        this.setState(() => {\n          return {\n            selectedGenreID: genre\n          };\n        });\n      }\n\n      const {\n        items\n      } = this.state;\n      let newItems = [];\n\n      if (String(genre) !== \"All\") {\n        for (let i = 0; i < items.length; i++) {\n          for (let genre_id = 0; genre_id < items[i].genre_ids.length; genre_id++) {\n            if (items[i].genre_ids[genre_id] === parseInt(genre)) {\n              newItems.push(items[i]);\n            }\n          }\n        }\n\n        this.setState(() => {\n          return {\n            items: [...newItems]\n          };\n        });\n      } else {\n        this.setState(() => {\n          return {\n            items: [...this.state.itemsCopy]\n          };\n        });\n      }\n    };\n\n    this.onChangeYear = year => {\n      if (year !== this.state.selectedYear) {\n        this.setState(() => {\n          return {\n            selectedYear: year\n          };\n        });\n      }\n\n      if (year !== \"All\") {\n        this.setState(() => {\n          return {\n            items: this.state.items.filter(item => this.getYear(item.release_date) === year)\n          };\n        });\n      } else {\n        this.setState(() => {\n          return {\n            items: this.state.itemsCopy\n          };\n        });\n      }\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      type,\n      apiKey\n    } = this.state; //initial items\n\n    await axios.get(`https://api.themoviedb.org/3/${type}/popular?api_key=${apiKey}&language=en-US&page=1`).then(res => {\n      this.setState(() => {\n        return {\n          items: res.data.results,\n          itemsCopy: res.data.results,\n          initialItemsValue: res.data.results\n        };\n      });\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    const {\n      currentTitle,\n      items,\n      type\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: style.movies,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Filter, {\n      apiKey: this.state.apiKey,\n      onSearch: this.onSearch,\n      onChangeGenre: this.onChangeGenre,\n      onChangeYear: this.onChangeYear,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(Title, {\n      titleName: currentTitle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: style[\"items-container\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, items.map((item, i) => React.createElement(Item, {\n      key: item.id,\n      item: item,\n      type: type,\n      itemNum: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }))), React.createElement(Copyright, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Movies_Tvs;","map":{"version":3,"sources":["P:/REACT/mophoria/src/components/pages/movies_tvs/Movies_Tvs.js"],"names":["React","style","axios","Title","Item","Filter","Copyright","Movies_Tvs","Component","state","apiKey","items","itemsCopy","initialItemsValue","currentTitle","selectedGenreID","selectedYear","type","props","getYear","date","str","String","substring","onSearch","e","target","value","setState","get","then","res","data","results","filter","d","release_date","catch","err","console","log","onChangeGenre","genre","newItems","i","length","genre_id","genre_ids","parseInt","push","onChangeYear","year","item","componentDidMount","render","movies","map","id"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport style from \"./movies_tvs.module.css\";\r\nimport axios from \"axios\";\r\nimport Title from \"../../globalComponents/Title\";\r\nimport Item from \"./Item\";\r\nimport Filter from \"./Filter\";\r\nimport Copyright from \"../../globalComponents/Copyright\";\r\n\r\nclass Movies_Tvs extends React.Component {\r\n  state = {\r\n    apiKey: \"325d84ad33eb95a5c0fc5427ba3f569a\",\r\n    items: [],\r\n    itemsCopy: [],\r\n    initialItemsValue: [],\r\n    currentTitle: \"Popular\",\r\n    selectedGenreID: \"All\",\r\n    selectedYear: \"All\",\r\n    type: this.props.type,\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const { type, apiKey } = this.state;\r\n    //initial items\r\n    await axios\r\n      .get(\r\n        `https://api.themoviedb.org/3/${type}/popular?api_key=${apiKey}&language=en-US&page=1`\r\n      )\r\n      .then((res) => {\r\n        this.setState(() => {\r\n          return {\r\n            items: res.data.results,\r\n            itemsCopy: res.data.results,\r\n            initialItemsValue: res.data.results,\r\n          };\r\n        });\r\n      })\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  getYear = (date) => {\r\n    let str = String(date);\r\n    return str.substring(0, 4);\r\n  };\r\n\r\n  // SEARCH AND FILTER ONSEARCH\r\n  onSearch = async (e) => {\r\n    //change items on search\r\n    if (e.target.value === \"\") {\r\n      this.setState(() => {\r\n        return {\r\n          items: [...this.state.initialItemsValue],\r\n          currentTitle: \"Popular\",\r\n        };\r\n      });\r\n    } else {\r\n      await axios\r\n        .get(\r\n          `https://api.themoviedb.org/3/search/${this.state.type}?api_key=${this.state.apiKey}&language=en-US&page=1&include_adult=false&query=${e.target.value}`\r\n        )\r\n        .then((res) => {\r\n          this.setState(() => {\r\n            return {\r\n              items:\r\n                this.state.selectedYear === \"All\"\r\n                  ? res.data.results\r\n                  : res.data.results.filter(\r\n                      (d) =>\r\n                        this.getYear(d.release_date) === this.state.selectedYear\r\n                    ),\r\n              currentTitle: \"Search Result\",\r\n            };\r\n          });\r\n        })\r\n        .catch((err) => console.log(err));\r\n\r\n      //set itemsCopy after items is set to new values\r\n      this.setState(() => {\r\n        return {\r\n          itemsCopy: [...this.state.items],\r\n        };\r\n      });\r\n\r\n      //filter search result based on selected genre\r\n      this.onChangeGenre(this.state.selectedGenreID);\r\n    }\r\n  };\r\n\r\n  //FILTERS !\r\n  onChangeGenre = (genre) => {\r\n    if (genre !== this.state.selectedGenreID) {\r\n      this.setState(() => {\r\n        return {\r\n          selectedGenreID: genre,\r\n        };\r\n      });\r\n    }\r\n\r\n    const { items } = this.state;\r\n    let newItems = [];\r\n\r\n    if (String(genre) !== \"All\") {\r\n      for (let i = 0; i < items.length; i++) {\r\n        for (\r\n          let genre_id = 0;\r\n          genre_id < items[i].genre_ids.length;\r\n          genre_id++\r\n        ) {\r\n          if (items[i].genre_ids[genre_id] === parseInt(genre)) {\r\n            newItems.push(items[i]);\r\n          }\r\n        }\r\n      }\r\n      this.setState(() => {\r\n        return {\r\n          items: [...newItems],\r\n        };\r\n      });\r\n    } else {\r\n      this.setState(() => {\r\n        return {\r\n          items: [...this.state.itemsCopy],\r\n        };\r\n      });\r\n    }\r\n  };\r\n\r\n  onChangeYear = (year) => {\r\n    if (year !== this.state.selectedYear) {\r\n      this.setState(() => {\r\n        return {\r\n          selectedYear: year,\r\n        };\r\n      });\r\n    }\r\n\r\n    if (year !== \"All\") {\r\n      this.setState(() => {\r\n        return {\r\n          items: this.state.items.filter(\r\n            (item) => this.getYear(item.release_date) === year\r\n          ),\r\n        };\r\n      });\r\n    } else {\r\n      this.setState(() => {\r\n        return {\r\n          items: this.state.itemsCopy,\r\n        };\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { currentTitle, items, type } = this.state;\r\n\r\n    return (\r\n      <div className={style.movies}>\r\n        <Filter\r\n          apiKey={this.state.apiKey}\r\n          onSearch={this.onSearch}\r\n          onChangeGenre={this.onChangeGenre}\r\n          onChangeYear={this.onChangeYear}\r\n        />\r\n        <Title titleName={currentTitle} />\r\n        <div className={style[\"items-container\"]}>\r\n          {items.map((item, i) => (\r\n            <Item key={item.id} item={item} type={type} itemNum={i} />\r\n          ))}\r\n        </div>\r\n\r\n        <Copyright />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Movies_Tvs;\r\n"]},"metadata":{},"sourceType":"module"}