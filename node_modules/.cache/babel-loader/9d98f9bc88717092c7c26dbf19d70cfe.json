{"ast":null,"code":"import _regeneratorRuntime from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/inherits\";import _slicedToArray from\"/media/kevin/Projects/REACT/mophoria/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Component,useState,useRef}from\"react\";import style from\"./movies_tvs.module.css\";import axios from\"axios\";import ArrowDropDownIcon from\"@material-ui/icons/ArrowDropDown\";var Select=React.forwardRef(function(props,ref){var placeholder=props.placeholder,type=props.type;return React.createElement(\"select\",{onChange:function onChange(e){props.onChangeGenre(e.target.value);},ref:ref,className:style[\"select\"]},React.createElement(\"option\",{value:\"All\",disabled:true,selected:true},placeholder),React.createElement(\"option\",{value:\"All\"},\"All\"),type===\"genre\"?props.options.map(function(op){return React.createElement(\"option\",{key:op.id,value:op.id},op.name);}):props.options.map(function(op,i){return React.createElement(\"option\",{key:i,value:op},op);}));});var InputSelect=function InputSelect(props){var type=props.type,options=props.options,placeholder=props.placeholder,onChange=props.onChange;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),selectedOption=_useState2[0],setSelectedOption=_useState2[1];var input=useRef();var optionContainer=useRef();var option=useRef();var onChangeInput=function onChangeInput(e){setSelectedOption(e.target.value);};var onClickInput=function onClickInput(){optionContainer.current.style.display=\"block\";};var onClickOption=function onClickOption(e){var textContent=e.target.textContent;onChange(e.target.getAttribute(\"value\"));optionContainer.current.style.display=\"none\";input.current.value=textContent;};var capitalize=function capitalize(word){var capitalized=String(word).charAt(0).toUpperCase()+String(word).slice(1);return capitalized;};return React.createElement(\"div\",{className:style[\"input-select\"]},React.createElement(\"input\",{ref:input,placeholder:placeholder// className={style.select}\n,onClick:onClickInput,onChange:onChangeInput}),React.createElement(ArrowDropDownIcon,{className:style[\"arrow-down\"],fontSize:\"large\"}),React.createElement(\"div\",null,React.createElement(\"div\",{ref:optionContainer,className:style[\"input-select-options\"]},options.filter(function(op){return type===\"genre\"?String(op.name).includes(capitalize(selectedOption)):op.includes(selectedOption);}).map(function(op,i){return type===\"genre\"?React.createElement(\"span\",{value:op.id,ref:option,onClick:onClickOption},op.name):React.createElement(\"span\",{value:op,ref:option,onClick:function onClick(e){return onClickOption(e);}},op);}))));};export var Filter=/*#__PURE__*/function(_Component){_inherits(Filter,_Component);function Filter(props){var _this;_classCallCheck(this,Filter);_this=_possibleConstructorReturn(this,_getPrototypeOf(Filter).call(this,props));var date=new Date();var currentYear=date.getFullYear();var years=[\"All\"];for(var i=0;i<10;i++){years.push(String(currentYear-i));}_this.state={years:[].concat(years),genres:[\"All\"],sortBy:[\"Latest\",\"Oldest\"]};_this.genre=React.createRef();_this.selectContainer=React.createRef();return _this;}_createClass(Filter,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var apiKey;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:apiKey=this.props.apiKey;_context.next=3;return axios.get(\"https://api.themoviedb.org/3/genre/movie/list?api_key=\".concat(apiKey,\"&language=en-US\")).then(function(res){return _this2.setState(function(){return{genres:_toConsumableArray(res.data.genres)};});}).catch(function(err){return console.log(err);});case 3:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this3=this;var _this$props=this.props,onChangeGenre=_this$props.onChangeGenre,onChangeYear=_this$props.onChangeYear;return React.createElement(\"div\",{className:style.filter},React.createElement(\"div\",{ref:this.inputContainer,className:style[\"input-container\"]},React.createElement(\"input\",{onChange:function onChange(e){return _this3.props.onSearch(e);},type:\"text\",placeholder:\"Keyword\"})),React.createElement(\"div\",{ref:this.selectContainer,className:style[\"select-container\"]},React.createElement(InputSelect,{type:\"year\",options:this.state.years,placeholder:\"Year\",onChange:onChangeYear}),React.createElement(InputSelect,{ref:this.genre,onChange:onChangeGenre,placeholder:\"Genre\",type:\"genre\",options:this.state.genres})));}}]);return Filter;}(Component);export default Filter;","map":{"version":3,"sources":["/media/kevin/Projects/REACT/mophoria/src/components/pages/movies_tvs/Filter.js"],"names":["React","Component","useState","useRef","style","axios","ArrowDropDownIcon","Select","forwardRef","props","ref","placeholder","type","e","onChangeGenre","target","value","options","map","op","id","name","i","InputSelect","onChange","selectedOption","setSelectedOption","input","optionContainer","option","onChangeInput","onClickInput","current","display","onClickOption","textContent","getAttribute","capitalize","word","capitalized","String","charAt","toUpperCase","slice","filter","includes","Filter","date","Date","currentYear","getFullYear","years","push","state","genres","sortBy","genre","createRef","selectContainer","apiKey","get","then","res","setState","data","catch","err","console","log","onChangeYear","inputContainer","onSearch"],"mappings":"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","sourcesContent":["import React, { Component, useState, useRef } from \"react\";\r\nimport style from \"./movies_tvs.module.css\";\r\nimport axios from \"axios\";\r\nimport ArrowDropDownIcon from \"@material-ui/icons/ArrowDropDown\";\r\n\r\nconst Select = React.forwardRef((props, ref) => {\r\n  const { placeholder, type } = props;\r\n  return (\r\n    <select\r\n      onChange={e => {\r\n        props.onChangeGenre(e.target.value);\r\n      }}\r\n      ref={ref}\r\n      className={style[\"select\"]}\r\n    >\r\n      <option value=\"All\" disabled selected>\r\n        {placeholder}\r\n      </option>\r\n      <option value=\"All\">All</option>\r\n\r\n      {type === \"genre\"\r\n        ? props.options.map(op => (\r\n            <option key={op.id} value={op.id}>\r\n              {op.name}\r\n            </option>\r\n          ))\r\n        : props.options.map((op, i) => (\r\n            <option key={i} value={op}>\r\n              {op}\r\n            </option>\r\n          ))}\r\n    </select>\r\n  );\r\n});\r\n\r\nconst InputSelect = props => {\r\n  const { type, options, placeholder, onChange } = props;\r\n  const [selectedOption, setSelectedOption] = useState(\"\");\r\n\r\n  const input = useRef();\r\n  const optionContainer = useRef();\r\n  const option = useRef();\r\n\r\n  const onChangeInput = e => {\r\n    setSelectedOption(e.target.value);\r\n  };\r\n\r\n  const onClickInput = () => {\r\n    optionContainer.current.style.display = \"block\";\r\n  };\r\n\r\n  const onClickOption = e => {\r\n    let textContent = e.target.textContent;\r\n    onChange(e.target.getAttribute(\"value\"));\r\n\r\n    optionContainer.current.style.display = \"none\";\r\n    input.current.value = textContent;\r\n  };\r\n\r\n  const capitalize = word => {\r\n    let capitalized =\r\n      String(word)\r\n        .charAt(0)\r\n        .toUpperCase() + String(word).slice(1);\r\n    return capitalized;\r\n  };\r\n\r\n  return (\r\n    <div className={style[\"input-select\"]}>\r\n      <input\r\n        ref={input}\r\n        placeholder={placeholder}\r\n        // className={style.select}\r\n        onClick={onClickInput}\r\n        onChange={onChangeInput}\r\n      />\r\n      <ArrowDropDownIcon className={style[\"arrow-down\"]} fontSize=\"large\" />\r\n      <div>\r\n        <div ref={optionContainer} className={style[\"input-select-options\"]}>\r\n          {options\r\n            .filter(op =>\r\n              type === \"genre\"\r\n                ? String(op.name).includes(capitalize(selectedOption))\r\n                : op.includes(selectedOption)\r\n            )\r\n            .map((op, i) =>\r\n              type === \"genre\" ? (\r\n                <span value={op.id} ref={option} onClick={onClickOption}>\r\n                  {op.name}\r\n                </span>\r\n              ) : (\r\n                <span value={op} ref={option} onClick={e => onClickOption(e)}>\r\n                  {op}\r\n                </span>\r\n              )\r\n            )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport class Filter extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    let date = new Date();\r\n    let currentYear = date.getFullYear();\r\n    let years = [\"All\"];\r\n\r\n    for (let i = 0; i < 10; i++) {\r\n      years.push(String(currentYear - i));\r\n    }\r\n\r\n    this.state = {\r\n      years: [...years],\r\n      genres: [\"All\"],\r\n      sortBy: [\"Latest\", \"Oldest\"]\r\n    };\r\n\r\n    this.genre = React.createRef();\r\n    this.selectContainer = React.createRef();\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { apiKey } = this.props;\r\n\r\n    await axios\r\n      .get(\r\n        `https://api.themoviedb.org/3/genre/movie/list?api_key=${apiKey}&language=en-US`\r\n      )\r\n      .then(res =>\r\n        this.setState(() => {\r\n          return {\r\n            genres: [...res.data.genres]\r\n          };\r\n        })\r\n      )\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  render() {\r\n    const { onChangeGenre, onChangeYear } = this.props;\r\n\r\n    return (\r\n      <div className={style.filter}>\r\n        <div ref={this.inputContainer} className={style[\"input-container\"]}>\r\n          <input\r\n            onChange={e => this.props.onSearch(e)}\r\n            type=\"text\"\r\n            placeholder=\"Keyword\"\r\n          />\r\n        </div>\r\n        <div ref={this.selectContainer} className={style[\"select-container\"]}>\r\n          <InputSelect\r\n            type=\"year\"\r\n            options={this.state.years}\r\n            placeholder=\"Year\"\r\n            onChange={onChangeYear}\r\n          />\r\n\r\n          <InputSelect\r\n            ref={this.genre}\r\n            onChange={onChangeGenre}\r\n            placeholder=\"Genre\"\r\n            type=\"genre\"\r\n            options={this.state.genres}\r\n          />\r\n\r\n          {/* <Select\r\n            placeholder=\"Sort by\"\r\n            type=\"sort\"\r\n            options={this.state.sortBy}\r\n          /> */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Filter;\r\n"]},"metadata":{},"sourceType":"module"}