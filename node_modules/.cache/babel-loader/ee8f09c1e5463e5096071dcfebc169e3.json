{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kevin\\\\go\\\\src\\\\github.com\\\\kevsbry\\\\react projects\\\\mophoria\\\\src\\\\components\\\\pages\\\\movies_tvs\\\\Movies.js\";\nimport React from \"react\";\nimport style from \"./movies_tvs.module.css\";\nimport axios from \"axios\";\nimport Title from \"../../globalComponents/Title\";\nimport Item from \"./Item\";\nimport Filter from \"./Filter\";\n\nclass Movies extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      apiKey: \"325d84ad33eb95a5c0fc5427ba3f569a\",\n      items: [],\n      itemsCopy: [],\n      initialItemsValue: [],\n      selectedGenreID: \"All\",\n      selectedYear: \"All\",\n      type: \"movie\"\n    };\n\n    this.onSearch = async e => {\n      //change items on search\n      if (e.target.value === \"\") {\n        this.setState(() => {\n          return {\n            items: [...this.state.initialItemsValue]\n          };\n        });\n      } else {\n        await axios.get(`https://api.themoviedb.org/3/search/movie?api_key=${this.state.apiKey}&language=en-US&page=1&include_adult=false&query=${e.target.value}`).then(res => {\n          this.setState(() => {\n            return {\n              items: res.data.results,\n              itemsCopy: res.data.results\n            };\n          });\n        }).catch(err => console.log(err)); //filter search result based on selected genre\n\n        this.onChangeGenre(this.state.selectedGenreID);\n      }\n    };\n\n    this.onChangeGenre = genre => {\n      if (genre !== this.state.selectedGenreID) {\n        this.setState(() => {\n          return {\n            selectedGenreID: genre\n          };\n        });\n      }\n\n      const {\n        items\n      } = this.state;\n      let newItems = [];\n\n      if (String(genre) !== \"All\") {\n        for (let i = 0; i < items.length; i++) {\n          for (let genre_id = 0; genre_id < items[i].genre_ids.length; genre_id++) {\n            if (items[i].genre_ids[genre_id] === parseInt(genre)) {\n              newItems.push(items[i]);\n            }\n          }\n        }\n\n        this.setState(() => {\n          return {\n            items: [...newItems]\n          };\n        });\n      } else {\n        this.setState(() => {\n          return {\n            items: [...this.state.itemsCopy]\n          };\n        });\n      }\n    };\n\n    this.onChangeYear = year => {\n      this.setState(() => {\n        return {\n          selectedYear: year\n        };\n      });\n    };\n  }\n\n  async componentDidMount() {\n    const {\n      apiKey\n    } = this.state; //initial items\n\n    await axios.get(`https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=en-US&page=1`).then(res => {\n      this.setState(() => {\n        return {\n          items: res.data.results,\n          initialItemsValue: res.data.results\n        };\n      });\n    }).catch(err => console.log(err));\n  }\n\n  render() {\n    const {\n      items,\n      type\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: style.movies,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Title, {\n      titleName: \"Search movies\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(Filter, {\n      apiKey: this.state.apiKey,\n      onSearch: this.onSearch,\n      onChangeGenre: this.onChangeGenre,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: style[\"items-container\"],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, items.map((item, i) => React.createElement(Item, {\n      key: item.id,\n      item: item,\n      type: type,\n      itemNum: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default Movies;","map":{"version":3,"sources":["C:/Users/kevin/go/src/github.com/kevsbry/react projects/mophoria/src/components/pages/movies_tvs/Movies.js"],"names":["React","style","axios","Title","Item","Filter","Movies","Component","state","apiKey","items","itemsCopy","initialItemsValue","selectedGenreID","selectedYear","type","onSearch","e","target","value","setState","get","then","res","data","results","catch","err","console","log","onChangeGenre","genre","newItems","String","i","length","genre_id","genre_ids","parseInt","push","onChangeYear","year","componentDidMount","render","movies","map","item","id"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport style from \"./movies_tvs.module.css\";\r\nimport axios from \"axios\";\r\nimport Title from \"../../globalComponents/Title\";\r\nimport Item from \"./Item\";\r\nimport Filter from \"./Filter\";\r\n\r\nclass Movies extends React.Component {\r\n  state = {\r\n    apiKey: \"325d84ad33eb95a5c0fc5427ba3f569a\",\r\n    items: [],\r\n    itemsCopy: [],\r\n    initialItemsValue: [],\r\n    selectedGenreID: \"All\",\r\n    selectedYear: \"All\",\r\n    type: \"movie\"\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const { apiKey } = this.state;\r\n    //initial items\r\n    await axios\r\n      .get(\r\n        `https://api.themoviedb.org/3/movie/popular?api_key=${apiKey}&language=en-US&page=1`\r\n      )\r\n      .then(res => {\r\n        this.setState(() => {\r\n          return {\r\n            items: res.data.results,\r\n            initialItemsValue: res.data.results\r\n          };\r\n        });\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  onSearch = async e => {\r\n    //change items on search\r\n    if (e.target.value === \"\") {\r\n      this.setState(() => {\r\n        return {\r\n          items: [...this.state.initialItemsValue]\r\n        };\r\n      });\r\n    } else {\r\n      await axios\r\n        .get(\r\n          `https://api.themoviedb.org/3/search/movie?api_key=${this.state.apiKey}&language=en-US&page=1&include_adult=false&query=${e.target.value}`\r\n        )\r\n        .then(res => {\r\n          this.setState(() => {\r\n            return {\r\n              items: res.data.results,\r\n              itemsCopy: res.data.results\r\n            };\r\n          });\r\n        })\r\n        .catch(err => console.log(err));\r\n\r\n      //filter search result based on selected genre\r\n      this.onChangeGenre(this.state.selectedGenreID);\r\n    }\r\n  };\r\n\r\n  //FILTERS !\r\n  onChangeGenre = genre => {\r\n    if (genre !== this.state.selectedGenreID) {\r\n      this.setState(() => {\r\n        return {\r\n          selectedGenreID: genre\r\n        };\r\n      });\r\n    }\r\n\r\n    const { items } = this.state;\r\n    let newItems = [];\r\n\r\n    if (String(genre) !== \"All\") {\r\n      for (let i = 0; i < items.length; i++) {\r\n        for (\r\n          let genre_id = 0;\r\n          genre_id < items[i].genre_ids.length;\r\n          genre_id++\r\n        ) {\r\n          if (items[i].genre_ids[genre_id] === parseInt(genre)) {\r\n            newItems.push(items[i]);\r\n          }\r\n        }\r\n      }\r\n      this.setState(() => {\r\n        return {\r\n          items: [...newItems]\r\n        };\r\n      });\r\n    } else {\r\n      this.setState(() => {\r\n        return {\r\n          items: [...this.state.itemsCopy]\r\n        };\r\n      });\r\n    }\r\n  };\r\n\r\n  onChangeYear = year => {\r\n    this.setState(() => {\r\n      return {\r\n        selectedYear: year\r\n      };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { items, type } = this.state;\r\n\r\n    return (\r\n      <div className={style.movies}>\r\n        <Title titleName=\"Search movies\" />\r\n        <Filter\r\n          apiKey={this.state.apiKey}\r\n          onSearch={this.onSearch}\r\n          onChangeGenre={this.onChangeGenre}\r\n        />\r\n        <div className={style[\"items-container\"]}>\r\n          {items.map((item, i) => (\r\n            <Item key={item.id} item={item} type={type} itemNum={i} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Movies;\r\n"]},"metadata":{},"sourceType":"module"}